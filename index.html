<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Ball System Game</title>
  <style>
    body { font-family: Arial, sans-serif; background:#111; color:#fff; margin:0; padding:0 }
    .hidden{display:none}
    .container{max-width:900px;margin:auto;padding:20px}
    input,button,select{padding:8px;margin:5px 0;width:100%}
    button{cursor:pointer}
    .error{color:red}
    .success{color:lime}
    .box{background:#1c1c1c;padding:15px;border-radius:8px;margin-bottom:20px}
    .grid{display:grid;grid-template-columns:repeat(5,1fr);gap:10px;margin-top:10px}
    .cell{background:#333;padding:20px;text-align:center;font-size:24px;border-radius:6px;cursor:pointer}
    .chat{height:150px;overflow:auto;background:#000;padding:10px;margin-bottom:10px}
  </style>
</head>
<body>
<div class="container">  <!-- LOGIN / REGISTER -->  <div id="auth" class="box">
    <h2>Login / Register</h2>
    <input id="username" placeholder="Username" />
    <input id="password" type="password" placeholder="Password" />
    <input id="password2" type="password" placeholder="Repeat password (register)" />
    <button onclick="login()">Login</button>
    <button onclick="register()">Register</button>
    <div id="authMsg" class="error"></div>
  </div>  <!-- USER PANEL -->  <div id="userPanel" class="hidden">
    <div class="box">
      <h3>Welcome <span id="userName"></span></h3>
      <p>Balance: <span id="balance"></span> ball</p>
      <button onclick="logout()">Logout</button>
    </div><!-- GAME -->
<div class="box">
  <h3>‚≠êüí£ Game</h3>
  <select id="bet">
    <option>2</option><option>4</option><option>6</option><option>8</option><option>10</option><option>20</option>
  </select>
  <select id="stars">
    <option value="1">1 Star (1.1x)</option>
    <option value="2">2 Stars (1.2x)</option>
  </select>
  <button onclick="startGame()">Start</button>
  <div class="grid" id="grid"></div>
</div>

<!-- CHAT -->
<div class="box">
  <h3>Chat with Admin</h3>
  <div class="chat" id="chat"></div>
  <input id="chatInput" placeholder="Write message" />
  <button onclick="sendMsg()">Send</button>
</div>

  </div>  <!-- ADMIN PANEL -->  <div id="adminPanel" class="hidden">
    <div class="box">
      <h2>Admin Panel</h2>
      <button onclick="logout()">Logout</button>
    </div>
    <div class="box">
      <h3>Give Ball</h3>
      <input id="giveUser" placeholder="Username" />
      <input id="giveAmount" type="number" placeholder="Ball amount" />
      <button onclick="giveBall()">Give</button>
    </div>
    <div class="box">
      <h3>User Messages</h3>
      <div class="chat" id="adminChat"></div>
      <input id="adminReply" placeholder="Reply" />
      <button onclick="reply()">Reply</button>
    </div>
  </div></div><script>
// DATABASE (localStorage)
let users = JSON.parse(localStorage.getItem('users')) || {
  admin11:{password:'parol11',balance:0,chat:[]}
};
let currentUser=null;
let opened=0, bombs=[];

function save(){localStorage.setItem('users',JSON.stringify(users));}

function register(){
  let u=username.value, p=password.value, p2=password2.value;
  if(!u||!p) return authMsg.innerText='Fill all fields';
  if(p!==p2) return authMsg.innerText='Passwords not same';
  if(users[u]) return authMsg.innerText='User already exists';
  users[u]={password:p,balance:10,chat:[]}; // auto 10 ball
  save(); authMsg.innerText='Registered! Now login'; authMsg.className='success';
}

function login(){
  let u=username.value, p=password.value;
  if(!users[u]||users[u].password!==p) return authMsg.innerText='Wrong login';
  currentUser=u; auth.classList.add('hidden');
  if(u==='admin11'){adminPanel.classList.remove('hidden');loadAdminChat();}
  else{userPanel.classList.remove('hidden');loadUser();}
}

function logout(){location.reload();}

function loadUser(){userName.innerText=currentUser;balance.innerText=users[currentUser].balance;loadChat();}

function startGame(){
  let bet=parseInt(bet.value), star=parseInt(stars.value);
  if(users[currentUser].balance<bet) return alert('Not enough ball');
  users[currentUser].balance-=bet; save(); balance.innerText=users[currentUser].balance;
  grid.innerHTML=''; opened=0; bombs=[Math.floor(Math.random()*5)];
  for(let i=0;i<5;i++){
    let d=document.createElement('div');d.className='cell';d.innerText='?';
    d.onclick=()=>openCell(i,d,bet,star); grid.appendChild(d);
  }
}

function openCell(i,el,bet,star){
  if(el.innerText!=='?')return;
  if(bombs.includes(i)){
    el.innerText='üí£'; alert('Bomb! You lost'); save(); balance.innerText=users[currentUser].balance;
  } else{
    el.innerText='‚≠ê'; opened++;
    if(opened===star){
      let win=bet*(star===1?1.1:1.2);
      users[currentUser].balance+=Math.floor(win);
      save(); balance.innerText=users[currentUser].balance;
      alert('You win '+Math.floor(win));
    }
  }
}

function sendMsg(){
  users[currentUser].chat.push({from:currentUser,text:chatInput.value});
  chatInput.value=''; save(); loadChat();
}

function loadChat(){
  chat.innerHTML='';
  users[currentUser].chat.forEach(m=>chat.innerHTML+=`<p><b>${m.from}:</b> ${m.text}</p>`);
}

function loadAdminChat(){
  adminChat.innerHTML='';
  for(let u in users){
    users[u].chat.forEach(m=>adminChat.innerHTML+=`<p><b>${u}:</b> ${m.text}</p>`);
  }
}

function reply(){
  let msg=adminReply.value;
  if(!msg)return;
  for(let u in users){users[u].chat.push({from:'admin',text:msg});}
  adminReply.value=''; save(); loadAdminChat();
}

function giveBall(){
  let u=giveUser.value, a=parseInt(giveAmount.value);
  if(!users[u]) return alert('User not found');
  users[u].balance+=a; save(); alert('Given');
}
</script></body>
</html>